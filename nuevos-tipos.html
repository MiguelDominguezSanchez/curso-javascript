<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" href="img/favicon.png" type="image/gif" sizes="16x16"> 

    <title>Nuevos Tipos de Javascript</title>
</head>
<body>

    <h1>Nuevos Tipos de Javascript</h1>
    <p>lorem</p>
    <p>lorem</p>
    <p>lorem</p>

    <!-- <script>

    // 52. WeakSets & EakMaps

    // const ws = new WeakSet([1,2,3,3,4,5,true,false,false, {}, {}, "hola", "HOla"])
    // const ws = new WeakSet()

    // let valor1 = {"valor1": 1}
    // let valor2 = {"valor1": 2}
    // let valor3 = {"valor1": 3}

    // ws.add(valor1)
    // ws.add(valor2)
    // console.log(ws)

    // console.log(ws.has(valor1))
    // console.log(ws.has(valor3))

    // ws.delete(valor2)
    // console.log(ws)

    // ws.add(valor2)
    // ws.add(valor3)
    // console.log(ws)

    // setInterval(()=> console.log(ws), 1000)

    // setTimeout(()=>{
    //     valor1 = null
    //     valor2 = null
    //     valor3 = null
    // }, 5000)

    // const wm = new WeakMap([
    //     ["nombre", "kEnAi"],
    //     ["edad", 7],
    //     ["animal", "perro"],
    //     [null, "nulo"]

    // ])

    const wm = new WeakMap()
    let llave1 = {}
    let llave2 = {}
    let llave3 = {}

    wm.set(llave1,1)
    wm.set(llave2,2)
    console.log(wm)

    console.log(wm.has(llave1))
    console.log(wm.has(llave3))
    
    console.log(wm.get(llave1))
    console.log(wm.get(llave2))
    console.log(wm.get(llave3))

    wm.delete(llave2)
    console.log(wm)

    setInterval(()=> console.log(wm), 1000)

    setTimeout(()=>{
        llave1 = null
        llave2 = null
        llave3 = null
    }, 5000)

    </script> -->

    <!-- <script>

        // 53. Iterables e Iterators

        const iterable = [1,2,3,4,5]
        // const iterable = new Set ([1,2,3,3,3,4,5,6,6])
        // const iterable = "Hola Mundo"
        // const iterable = new Map((["nombre", "jon"],["edad", 35]));
        
        
        // Accedemos al iterador del iterable
        const iterador = iterable[Symbol.iterator]()

        console.log(iterable)
        console.log(iterador)
        // console.log(iterador.next())
        // console.log(iterador.next())
        // console.log(iterador.next())
        // console.log(iterador.next())
        // console.log(iterador.next())
        // console.log(iterador.next())

        let next = iterador.next()

        while(!next.done){
            console.log(next.value)
            next = iterador.next()
        }






    </script> -->

    <!-- <script>

        // 54. Generators

        function* iterable(){
            yield "hola"
            console.log("Hola consola")
            yield "hola 2"
            console.log("Seguimos con más instrucciones de nuestro código")
            yield "hola 3"
            yield "hola 4"
        }

        let iterador = iterable()
        // console.log(iterador.next())
        // console.log(iterador.next())
        // console.log(iterador.next())
        // console.log(iterador.next())
        // console.log(iterador.next())

        for(let y of iterador){
            console.log(y)
        }

        const arr = [...iterable()]
        console.log(arr)

        function cuadrado(valor){
            setTimeout(()=>{
                return console.log({valor, resultado: valor*valor})
            }, Math.random()*1000)
        }


        function* generador(){
            console.log("Inicia Generator")
            yield cuadrado(0)
            yield cuadrado(1)
            yield cuadrado(2)
            yield cuadrado(3)
            yield cuadrado(4)
            yield cuadrado(5)
            console.log("Termina Generator")
        }

        let gen = generador()

        for (let y of gen){
            console.log(y)
        }

    </script> -->

    <script>

        // 55. Proxies

        const persona = {
            nombre: "",
            apellido: "edad",
            edad: 0
        }

        const manejador = {
            set(obj, prop, valor){
                
                if(Object.keys(obj).indexOf(prop)===-1){
                    return console.log(`La propiedad "${prop}" no existe en e objeto persona.`)
                }

                if(
                    (prop === "nombre" || prop === "apellidos") &&
                    !(/^[A-Za-zÑñÁáÉéÍíÓóÚúÜü\s]+$/g.test(valor))
                ){
                    return console.error(`La propiedad "${prop}" sólo acepta letras y espacios en blanco`)
                }
                obj[prop] = valor;
                }
            }
        

        const jon = new Proxy(persona, manejador)
        jon.nombre = "Jon"
        jon.apellido = "MirCha"
        jon.edad = 35
        jon.twitter = "@jonmircha"
        console.log(jon)

        console.log(persona)

    </script>
    
</body>
</html>